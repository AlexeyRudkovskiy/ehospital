{"version":3,"sources":["ui/inline-popup.ts"],"names":[],"mappings":"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","file":"ui/inline-popup.js","sourcesContent":["export class InlinePopup {\r\n\r\n    protected static element:any = null;\r\n\r\n    protected root:any;\r\n\r\n    protected pageMargins:number = 15;\r\n\r\n    protected onLoadedFunc:any = null;\r\n\r\n    constructor (\r\n        private target:any,\r\n        private content:string,\r\n        private ajax:boolean = false,\r\n        private config:any = {}\r\n    ) {\r\n        if (typeof config['maxWidth'] === \"undefined\") {\r\n            this.config['maxWidth'] = 300;\r\n        }\r\n    }\r\n\r\n    public setOnLoadedEventListener(func:any):InlinePopup {\r\n        this.onLoadedFunc = func;\r\n        return this;\r\n    }\r\n\r\n    public show():InlinePopup {\r\n        if (InlinePopup.element != null) {\r\n            InlinePopup.element.parentElement.removeChild(InlinePopup.element);\r\n        }\r\n\r\n        if (this.ajax) {\r\n            var request = (<any>window).fetch(this.content, {\r\n                credentials: 'same-origin'\r\n            })\r\n                .then(response => response.text())\r\n                .then(this.onContentLoaded.bind(this));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    private onContentLoaded (response) {\r\n        var offsetTop = this.target.offsetTop;\r\n        var offsetLeft = this.target.offsetLeft;\r\n        var offsetWidth = this.target.offsetWidth;\r\n        var offsetHeight = this.target.offsetHeight;\r\n\r\n        var popup = document.createElement('div');\r\n        var popupContent = document.createElement('div');\r\n        var popupClose = document.createElement('div');\r\n        var popupTriangle = document.createElement('div');\r\n\r\n        popup.classList.add('inline-popup');\r\n        popupClose.classList.add('inline-popup-close');\r\n        popupContent.classList.add('inline-popup-content');\r\n        popupTriangle.classList.add('inline-popup-triangle');\r\n\r\n        popup.appendChild(popupContent);\r\n        popup.appendChild(popupClose);\r\n        popup.appendChild(popupTriangle);\r\n\r\n        popupContent.innerHTML = response;\r\n\r\n        InlinePopup.element = popup;\r\n        document.querySelector('.container .content').appendChild(popup);\r\n\r\n        popup.style.top = \"0px\";\r\n        popup.style.left = \"0px\";\r\n\r\n        this.root = popupContent.firstChild;\r\n\r\n        if (popup.offsetWidth > this.config.maxWidth) {\r\n            var maxWidth = this.config.maxWidth;\r\n            popup.style.width = maxWidth + 'px';\r\n        }\r\n\r\n        popup.style.top = (offsetTop + offsetHeight) + \"px\";\r\n        var popupLeftPosition = offsetLeft - popup.offsetWidth / 2;\r\n        popup.style.left = (popupLeftPosition) + \"px\";\r\n        popupTriangle.style.left = (popup.offsetWidth / 2) + \"px\";\r\n        popupTriangle.style.marginLeft = \"17px\";\r\n\r\n        if (this.onLoadedFunc != null) {\r\n            this.onLoadedFunc.call(window, this.root);\r\n        }\r\n    }\r\n\r\n}"],"sourceRoot":"/source/"}