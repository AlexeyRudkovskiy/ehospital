{"version":3,"sources":["ui/ajax-form.ts"],"names":[],"mappings":";AAAA;IAEI,kBAAqB,IAAoB,EAAU,eAAmB;QAAjD,SAAI,GAAJ,IAAI,CAAgB;QAAU,oBAAe,GAAf,eAAe,CAAI;QAClE,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,UAAU,CAAK;YAC3C,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,IAAI,CAAC,UAAU,EAAE,CAAC;QACtB,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC;IAEO,6BAAU,GAAlB;QAAA,iBAeC;QAdG,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAC3B,IAAI,IAAI,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;QAExB,MAAO,CAAC,KAAK,CAAC,GAAG,EAAE;YACrB,MAAM,EAAE,MAAM;YACd,WAAW,EAAE,aAAa;YAC1B,OAAO,EAAE;gBACL,SAAS,EAAQ,MAAO,CAAC,KAAK;aACjC;YACD,IAAI,EAAE,IAAI;SACb,CAAC;aACG,IAAI,CAAC,UAAA,QAAQ,IAAI,OAAA,QAAQ,CAAC,IAAI,EAAE,EAAf,CAAe,CAAC;aACjC,IAAI,CAAC,UAAA,QAAQ,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,EAA3C,CAA2C,CAAC,CAAC;IACvE,CAAC;IAEL,eAAC;AAAD,CA1BA,AA0BC,IAAA;AA1BY,gBAAQ,WA0BpB,CAAA","file":"ui/ajax-form.js","sourcesContent":["export class AjaxForm {\n\n    constructor (private form:HTMLFormElement, private onFormSentEvent:any) {\n        form.addEventListener('submit', function (e:any) {\n            e.preventDefault();\n            this.onFormSent();\n        }.bind(this));\n    }\n\n    private onFormSent(): void {\n        var url = this.form.action;\n        var data = new FormData(this.form);\n        var method = this.form.method;\n\n        (<any>window).fetch(url, {\n            method: method,\n            credentials: 'same-origin',\n            headers: {\n                'x-token': (<any>window).token\n            },\n            body: data\n        })\n            .then(response => response.json())\n            .then(response => this.onFormSentEvent.call(window, response));\n    }\n\n}"],"sourceRoot":"/source/"}