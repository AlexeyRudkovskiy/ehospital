{"version":3,"sources":["pages/patient/hospitalization-popup-procedure-content-builder.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;YAQA;gBAAA;oBAMY,gBAAW,GAAO,EAAE,CAAC;gBA8CjC,CAAC;gBA5CG,2DAAK,GAAL,UAAM,IAAS;oBACX,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBACzC,IAAI,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;oBAE1C,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBAE3B,IAAI,CAAC,WAAW,GAAG,IAAI,IAAI;wBACvB,MAAM,EAAE,EAAE;wBACV,IAAI,EAAE,CAAC,CAAC;qBACX,CAAC;oBAEF,IAAI,IAAI,GAAG;wBACP,IAAI,EAAE,kBAAkB;wBACxB,YAAY,EAAE,WAAW;wBACzB,eAAe,EAAE,oBAAoB;wBACrC,aAAa,EAAE,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC;wBACjD,mBAAmB,EAAE,OAAO,CAAC,KAAK,CAAC,mBAAmB,CAAC;wBACvD,yBAAyB,EAAE,oCAAoC;wBAC/D,YAAY,EAAE,cAAI,CAAC,GAAG,CAAC,qBAAqB,CAAC;qBAChD,CAAC;oBACF,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC1B,IAAI,CAAC,cAAc,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,kBAAkB,EAAE,EAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,EAAC,CAAC,CAAC;oBACjG,CAAC;oBACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBAC9B,IAAI,SAAS,GAAe,WAAI,CAAC,MAAM,CAAC,WAAW,EAAE,WAAW,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;oBAE5E,IAAI,CAAC,IAAI,GAAG,WAAI,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;oBAEpC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;oBACtC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAEtC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;oBAEvB,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC;gBAED,qEAAe,GAAf;oBACI,qBAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;oBAE5B,uBAAc,CAAC,kBAAkB,CAAC,CAAC,wBAAwB,CAAC,UAAU,IAAI;wBACtE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;oBACxC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBAClB,CAAC;gBAEL,kDAAC;YAAD,CApDA,AAoDC,IAAA;;QAAA,CAAC","file":"hospitalization-popup-procedure-content-builder.js","sourcesContent":["import {ContentBuilder} from \"../../ui/popup/content-builder\";\nimport Popup from \"../../ui/popup/popup\";\nimport {Form, ElementInfo} from \"../../ui/form\";\nimport laroute = require(\"/js/laroute.js\");\nimport lang from \"../../lang\";\nimport app from \"../../application\";\nimport {findSelectById} from \"../../ui/select\";\n\nexport default class HospitalizationPopupProcedureContentBuilder implements ContentBuilder {\n\n    public popup:Popup;\n\n    private name;\n\n    private initialData:any = {};\n\n    build(data: any): any {\n        let body = document.createElement('div');\n        let form = document.createElement('form');\n\n        form.classList.add('form');\n\n        this.initialData = data || {\n            'name': '',\n            'id': -1\n        };\n\n        let args = {\n            'id': 'procedure_select',\n            'data-title': 'Процедуры',\n            'data-subtitle': \"Выберите процедуру\",\n            'data-search': laroute.route('search.procedures'),\n            'data-search-alias': laroute.route('search.procedures'),\n            'data-search-placeholder': 'Введите фразу для поиска процедуры',\n            'data-empty': lang.get('global.select.empty')\n        };\n        if (this.initialData.id > 0) {\n            args['data-preload'] = laroute.route('search.procedure', {'procedure': this.initialData.id});\n        }\n        console.log(this.initialData);\n        let procedure:ElementInfo = Form.select('Процедура', 'procedure', [], args);\n\n        this.name = Form.hidden('name', '');\n\n        form.appendChild(procedure.container);\n        form.appendChild(this.name.container);\n\n        body.appendChild(form);\n\n        return body;\n    }\n\n    onPopupAppeared () {\n        app.callEmmitable('select');\n\n        findSelectById('procedure_select').addOnChangeEventListener(function (item) {\n            this.name.element.value = item.text;\n        }.bind(this));\n    }\n\n}"]}