{"version":3,"sources":["ui/notifications.ts"],"names":[],"mappings":"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","file":"notifications.js","sourcesContent":["export interface NotificationAction {\n\n    url:string;\n\n    text:string;\n\n}\n\nexport class Notification {\n\n    text:string;\n\n    actions?:NotificationAction[];\n\n    type:string;\n\n    element?:HTMLDivElement;\n\n    timerId?:number;\n\n    notify () {\n        notifications.notify(this);\n    }\n\n}\n\nclass Notifications {\n\n    private container:HTMLDivElement;\n\n    constructor() {\n        this.container = document.querySelector('#notifications-container') as HTMLDivElement;\n    }\n\n    notify(notification:Notification) {\n\n        let element = this.createNotificationElement(notification);\n        let timeoutArgs = {\n            element: element,\n            instance: this\n        };\n        let mouseOverArgs:any = {\n            element: element\n        };\n        let timeoutCallback = this.onTimeout.bind(timeoutArgs);\n        let mouseOverListener = this.onMouseOver.bind(mouseOverArgs);\n\n        mouseOverArgs.listener = mouseOverListener;\n\n        this.container.appendChild(element);\n\n        let timerId = window.setTimeout(timeoutCallback, 2 * 1000);\n        mouseOverArgs.timerId = timerId;\n        notification.timerId = timerId;\n        element.addEventListener('mouseover', mouseOverListener);\n\n    }\n\n    private createNotificationElement (notification:Notification) : HTMLDivElement {\n        let element:HTMLDivElement = document.createElement('div');\n        let contentWrapper:HTMLDivElement = document.createElement('div');\n        let content:HTMLDivElement = document.createElement('div');\n        let close:HTMLDivElement = document.createElement('div');\n        let closeIcon:HTMLElement = document.createElement('i');\n\n        element.appendChild(contentWrapper);\n\n        element.appendChild(close);\n        element.classList.add('notification');\n\n        switch (notification.type) {\n            case 'success':\n                element.classList.add('notification-success');\n                break;\n            case 'danger':\n                element.classList.add('notification-danger');\n                break;\n        }\n\n        contentWrapper.appendChild(content);\n        contentWrapper.classList.add('notification-content');\n        content.innerHTML = notification.text;\n\n        close.appendChild(closeIcon);\n        close.classList.add('notification-close');\n\n        closeIcon.classList.add('material-icons');\n        closeIcon.innerHTML = 'close';\n\n        if (typeof notification.actions !== \"undefined\" && notification.actions.length > 0) {\n            let actions:HTMLDivElement = document.createElement('div');\n            let btnGroup:HTMLDivElement = document.createElement('div');\n\n            actions.classList.add('notification-actions');\n            btnGroup.classList.add('btn-group');\n\n            for (let i = 0; i < notification.actions.length; i++) {\n                let btn:HTMLAnchorElement = document.createElement('a');\n                btn.innerHTML = notification.actions[i].text;\n                btn.href = notification.actions[i].url;\n                btn.classList.add('btn');\n\n                btnGroup.appendChild(btn);\n            }\n\n            actions.appendChild(btnGroup);\n            contentWrapper.appendChild(actions);\n        }\n\n        notification.element = element;\n\n        close.addEventListener('click', function () {\n            (this as Notification).element.parentElement.removeChild((this as Notification).element);\n\n            window.clearTimeout((this as Notification).timerId);\n        }.bind(notification));\n\n        return element;\n    }\n\n    private onTimeout () {\n        (this as any).element.parentElement.removeChild((this as any).element);\n    }\n\n    private onMouseOver () {\n        window.clearTimeout((this as any).timerId);\n        (this as any).element.removeEventListener('mouseover', (this as any).listener);\n    }\n\n    private onCloseClickedEventListener () {\n\n    }\n\n}\n\nexport class NotificationBuilder {\n\n    private _text:string;\n\n    private _type:string;\n\n    private _actions:NotificationActionBuilder[] = [];\n\n    setText(value: string) {\n        this._text = value;\n        return this;\n    }\n\n    setType(value: string) {\n        this._type = value;\n        return this;\n    }\n\n    addAction() : NotificationActionBuilder {\n        let notificationActionBuilder = new NotificationActionBuilder(this);\n        this._actions.push(notificationActionBuilder);\n        return notificationActionBuilder;\n    }\n\n    build () : Notification {\n        let actions = this._actions.map(action => action.build());\n        let notification:Notification = new Notification();\n\n        notification.text = this._text;\n        notification.type = this._type;\n        notification.actions = actions;\n\n        return notification;\n    }\n\n    notify () {\n        this.build().notify();\n    }\n\n}\n\nexport class NotificationActionBuilder {\n\n    private _text:string;\n\n    private _url:string;\n\n    constructor (private builder:NotificationBuilder) {}\n\n    setText(value: string) {\n        this._text = value;\n        return this;\n    }\n\n    setUrl(value: string) {\n        this._url = value;\n        return this;\n    }\n\n    public build () : NotificationAction {\n        return {\n            text: this._text,\n            url: this._url\n        };\n    }\n\n    public stop () : NotificationBuilder {\n        return this.builder;\n    }\n\n}\n\nlet notifications:Notifications = new Notifications;\n(window as any).notifications = notifications;\nexport default notifications;\n"]}