{"version":3,"sources":["ui/sidebar.ts"],"names":[],"mappings":"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","file":"sidebar.js","sourcesContent":["let sidebarWrapper:Element = null;\nlet sidebar:Element = null;\nlet menuButton:Element = null;\nlet submenu:Element = null;\nlet active:Element = null;\nlet initialHeight:number = 0;\nlet lockSidebar:boolean = false;\n\nconst responsiveMobileMaxWidth:number = 1024;\n\nfunction documentOnClickCallback(e:MouseEvent) {\n    let current:Element = document.elementFromPoint(e.clientX, e.clientY);\n    if (!lockSidebar) {\n        while (current != sidebarWrapper) {\n            if (current == null || current.tagName == 'html'.toUpperCase() || current.classList.contains('sidebar-wrapper')) {\n                break;\n            }\n            current = current.parentElement;\n        }\n\n        if (current != sidebarWrapper) {\n            sidebarWrapper.classList.remove('active');\n            document.removeEventListener('click', documentOnClickCallback, false);\n\n            if (submenu != null) {\n                submenu.parentNode.removeChild(submenu);\n                (sidebar as any).style.display = \"block\";\n                (sidebarWrapper as any).style.transition = \"width 2s\";\n                (sidebarWrapper as any).style.height = initialHeight + \"px\";\n                submenu = null;\n            }\n        }\n    }\n\n    lockSidebar = false;\n}\n\nfunction groupHeaderOnClickListener (event:MouseEvent) {\n    if (window.innerWidth <= responsiveMobileMaxWidth) {\n        lockSidebar = true;\n        let innerList:HTMLElement = this.parentElement.getElementsByTagName('ul')[0];\n        let cloned:HTMLElement = innerList.cloneNode(true) as HTMLElement;\n        let localSidebarWrapper:Element = document.createElement('div');\n\n        if (initialHeight == 0) {\n            initialHeight = (sidebarWrapper as any).offsetHeight;\n        }\n\n        localSidebarWrapper.classList.add('sidebar');\n\n        (sidebar as any).style.display = 'none';\n        sidebarWrapper.appendChild(localSidebarWrapper);\n\n        localSidebarWrapper.appendChild(cloned);\n\n        (sidebarWrapper as any).style.height = (cloned as HTMLElement).offsetHeight + \"px\";\n        submenu = localSidebarWrapper;\n    } else {\n        if (this.parentElement.tagName.toLowerCase() == 'li') {\n            let items = sidebar.querySelectorAll('ul > li');\n            for (let i = 0; i < items.length; i++) {\n                items[i].classList.remove('active');\n            }\n            this.parentElement.classList.add('active');\n        }\n    }\n}\n\nexport default function updateSidebar () {\n\n    if (sidebarWrapper === null) {\n        sidebarWrapper = document.querySelector('.sidebar-wrapper');\n        sidebar = document.querySelector('.sidebar');\n        menuButton = document.querySelector('.app-header .menu');\n    }\n\n    const items:NodeListOf<Element> = sidebar.querySelectorAll('a[data-list-header]');\n    let item:Element = null;\n\n    menuButton.addEventListener('click', function () {\n        sidebarWrapper.classList.add('active');\n\n        window.setTimeout(() => document.addEventListener('click', documentOnClickCallback, false), 100);\n    });\n\n    for (let i = 0; i < items.length; i++) {\n        item = items[i];\n\n        item.addEventListener('click', groupHeaderOnClickListener);\n    }\n\n}"]}